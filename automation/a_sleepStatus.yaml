- id: a_set_sleep_status
  alias: Set person as sleeping
  trigger:
  - platform: state
    entity_id: sensor.duration_his_side
    to: '1'
  - platform: state
    entity_id: sensor.duration_her_side
    to: '1'
  action:
  #- service: input_boolean.turn_on
    service_template:  >
        {% if trigger.entity_id == 'sensor.duration_his_side' %}
          {% if states('input_boolean.ib_j_status_sleeping') == 'off' %}
            input_boolean.turn_on
          {% else %}
            input_boolean.turn_off
          {% endif %}
        {% else %}
          {% if states('input_boolean.ib_m_status_sleeping') == 'off' %}
            input_boolean.turn_on
          {% else %}
            input_boolean.turn_off
          {% endif %}
        {% endif %}
    data_template:
      entity_id:  >
        {% if trigger.entity_id == 'sensor.duration_his_side' %}
          input_boolean.ib_j_status_sleeping
        {% else %}
          input_boolean.ib_m_status_sleeping
        {% endif %}

# WILL NOT NEED BELOW IF NO USING AWAKE BOOLEAN        
# - id: a_j_sleep_set
  # alias: Josh Sleep Set
  # trigger:
    # platform: state
    # entity_id: input_boolean.ib_j_status_sleeping,
               # input_boolean.ib_j_status_awake
    # to: 'on'
  # action:
    # - service: input_boolean.turn_off
      # data_template:
        # entity_id: >
          # {% set booleans = [ 'input_boolean.ib_j_status_sleeping', 'input_boolean.ib_j_status_awake' ] | reject('equalto', trigger.entity_id) %}
          # {{ booleans | list | join(', ') }}
          
# - id: a_m_sleep_set
  # alias: MJ Sleep Set
  # trigger:
    # platform: state
    # entity_id: input_boolean.ib_m_status_sleeping,
               # input_boolean.ib_m_status_awake
    # to: 'on'
  # action:
    # - service: input_boolean.turn_off
      # data_template:
        # entity_id: >
          # {% set booleans = [ 'input_boolean.ib_m_status_sleeping', 'input_boolean.ib_m_status_awake' ] | reject('equalto', trigger.entity_id) %}
          # {{ booleans | list | join(', ') }}